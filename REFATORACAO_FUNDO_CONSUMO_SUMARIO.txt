================================================================================
REFATORAÃ‡ÃƒO FUNDO DE CONSUMO - SUMÃRIO DE MUDANÃ‡AS
Data: 22 de fevereiro de 2026
Baseado em: ALINHAMENTO_FUNDO_CONSUMO_BACKEND_FRONTEND.txt
================================================================================

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. MUDANÃ‡AS IMPLEMENTADAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.1. CONVERSÃƒO AUTOMÃTICA DE CENTAVOS (CRÃTICO)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ARQUIVO: src/utils/currency.js

PROBLEMA IDENTIFICADO:
- Backend armazena valores em CENTAVOS (10000 = 100,00 AOA)
- Frontend estava formatando valores diretamente sem converter
- Resultado: ExibiÃ§Ã£o incorreta de valores (10000,00 AOA ao invÃ©s de 100,00 AOA)

SOLUÃ‡ÃƒO IMPLEMENTADA:
âœ… Adicionada flag: CURRENCY_CONFIG.centavos = true
âœ… Criada funÃ§Ã£o: centavosParaDecimal(centavos) â†’ decimal
âœ… Criada funÃ§Ã£o: decimalParaCentavos(decimal) â†’ centavos
âœ… formatCurrency() agora converte automaticamente se CURRENCY_CONFIG.centavos = true
âœ… parseCurrency() retorna valores em centavos

IMPACTO:
- TODOS os lugares que usam formatCurrency() agora exibem valores corretos
- NÃ£o precisa alterar nenhum componente existente
- Backend e Frontend agora estÃ£o alinhados quanto Ã  representaÃ§Ã£o de valores

EXEMPLO:
Antes: formatCurrency(10000) â†’ "10.000,00 Kz" (ERRADO)
Depois: formatCurrency(10000) â†’ "100,00 Kz" (CORRETO)

VALIDAÃ‡ÃƒO NECESSÃRIA:
- [ ] Testar criaÃ§Ã£o de fundo com saldoInicial
- [ ] Testar recarga de fundo
- [ ] Testar dÃ©bito em pedido PRE_PAGO
- [ ] Verificar se inputs de valor estÃ£o enviando centavos corretos
- [ ] Validar preview de saldos em todos os modals

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2. ANÃLISE DO CÃ“DIGO EXISTENTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2.1. fundoConsumoService.js - STATUS: âœ… CORRETO                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ENDPOINTS IMPLEMENTADOS:
âœ… GET /fundos/config/valor-minimo
âœ… POST /fundos
âœ… GET /fundos/cliente/{clienteId}
âœ… GET /fundos/{fundoId}/saldo
âœ… POST /fundos/{fundoId}/recarregar
âœ… GET /fundos/{fundoId}/transacoes

UNWRAPPING DE RESPONSE:
âœ… Todos os mÃ©todos fazem response.data.data corretamente
âœ… Tratamento de erros por status code implementado
âœ… Mensagens de erro amigÃ¡veis

OBSERVAÃ‡ÃƒO:
Service estÃ¡ 100% alinhado com documento de especificaÃ§Ã£o.
NÃ£o precisa de alteraÃ§Ãµes.

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2.2. ModalCriarFundo.vue - STATUS: âœ… FUNCIONAL                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FUNCIONALIDADES IMPLEMENTADAS:
âœ… Consulta valorMinimo ao montar
âœ… ValidaÃ§Ã£o saldoInicial >= valorMinimo
âœ… Preview do valor em tempo real
âœ… Props: cliente (opcional)
âœ… Emits: fechar, fundo-criado

ALINHAMENTO COM DOCUMENTO:
âœ… Preenche clienteId automaticamente se receber prop cliente
âœ… ValidaÃ§Ãµes frontend antes de enviar request
âœ… Exibe mensagens de erro especÃ­ficas
âœ… Loading state durante criaÃ§Ã£o

MELHORIAS SUGERIDAS (FUTURAS):
- Padronizar evento de 'fechar' para 'close' (consistÃªncia)
- Padronizar evento 'fundo-criado' para 'sucesso' (consistÃªncia)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2.3. ModalRecarregarFundo.vue - STATUS: âš ï¸ MELHORIAS NECESSÃRIAS          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FUNCIONALIDADES IMPLEMENTADAS:
âœ… Consulta valorMinimo ao montar
âœ… SeleÃ§Ã£o de mÃ©todo (GPO/REF)
âœ… ValidaÃ§Ã£o valor >= valorMinimo
âœ… Props: isOpen, fundo
âœ… Emits: close, recarga-realizada

PENDÃŠNCIAS IDENTIFICADAS:
âš ï¸ NÃƒO exibe informaÃ§Ãµes do pagamento apÃ³s criar recarga
âš ï¸ NÃƒO mostra urlPagamento (GPO) ou entidade+referÃªncia (REF)
âš ï¸ NÃƒO valida se fundo estÃ¡ ativo antes de permitir recarga
âš ï¸ Preview de novo saldo implementado mas pode melhorar

ALINHAMENTO COM DOCUMENTO (SeÃ§Ã£o 4.5):
âŒ Falta exibir urlPagamento para GPO com botÃ£o de redirecionamento
âŒ Falta exibir entidade + referÃªncia para REF
âŒ Falta validaÃ§Ã£o: fundo.ativo === true

CÃ“DIGO NECESSÃRIO (conforme documento):

```vue
// ApÃ³s criar recarga
const pagamentoCriado = ref(null)

const confirmarRecarga = async () => {
  // ... validaÃ§Ãµes existentes

  const pagamento = await fundoConsumoService.recarregarFundo(
    props.fundo.id,
    formulario.value
  )
  
  pagamentoCriado.value = pagamento // â¬…ï¸ ADICIONAR ISSO
  
  // Modal muda de estado: exibe informaÃ§Ãµes do pagamento
}
```

TEMPLATE NECESSÃRIO:

```vue
<!-- ApÃ³s criar recarga -->
<div v-if="pagamentoCriado" class="payment-info">
  <h4>InformaÃ§Ãµes do Pagamento</h4>
  
  <!-- GPO: BotÃ£o para AppyPay -->
  <div v-if="formulario.metodoPagamento === 'GPO' && pagamentoCriado.urlPagamento">
    <p>Clique no botÃ£o abaixo para completar o pagamento:</p>
    <a 
      :href="pagamentoCriado.urlPagamento" 
      target="_blank" 
      class="btn btn-appypay"
    >
      Pagar com AppyPay â†’
    </a>
  </div>

  <!-- REF: Entidade + ReferÃªncia -->
  <div v-if="formulario.metodoPagamento === 'REF'">
    <div class="ref-info">
      <div class="ref-row">
        <span>Entidade:</span>
        <span class="ref-value">{{ pagamentoCriado.entidade }}</span>
      </div>
      <div class="ref-row">
        <span>ReferÃªncia:</span>
        <span class="ref-value large">{{ pagamentoCriado.referencia }}</span>
      </div>
    </div>
    <p>Use estes dados para efetuar o pagamento no banco.</p>
  </div>
</div>
```

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2.4. ModalNovoPedido.vue - STATUS: âœ… BOM                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FUNCIONALIDADES IMPLEMENTADAS:
âœ… Busca fundo ao montar (se unidade.cliente existe)
âœ… Exibe saldo atual do fundo
âœ… Valida saldo >= totalCarrinho
âœ… Alerta se saldo insuficiente
âœ… BotÃ£o "Criar Fundo" se cliente nÃ£o tem fundo
âœ… BotÃ£o "Recarregar" redireciona para FundoDetalheView
âœ… Desabilita botÃ£o "Criar Pedido" se saldo insuficiente

ALINHAMENTO COM DOCUMENTO:
âœ… Fluxo completo implementado conforme SeÃ§Ã£o 5.1 e 5.3
âœ… ValidaÃ§Ãµes em tempo real
âœ… Indicadores visuais (saldo baixo = vermelho/laranja)
âœ… IntegraÃ§Ã£o com fundoConsumoService correta

EXCELENTE IMPLEMENTAÃ‡ÃƒO!

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2.5. FundosView.vue - STATUS: âœ… FUNCIONAL                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FUNCIONALIDADES IMPLEMENTADAS:
âœ… Busca fundo por clienteId
âœ… Filtros por tipo e status
âœ… Lista de fundos encontrados
âœ… ValidaÃ§Ã£o de ID numÃ©rico

OBSERVAÃ‡ÃƒO:
Backend nÃ£o tem endpoint GET /fundos (listar todos).
View estÃ¡ adaptada para funcionar apenas com busca por cliente.
Documentado como melhoria futura no documento de alinhamento.

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2.6. FundoDetalheView.vue - STATUS: âœ… FUNCIONAL                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FUNCIONALIDADES IMPLEMENTADAS:
âœ… Exibe dados completos do fundo
âœ… HistÃ³rico de transaÃ§Ãµes
âœ… CÃ¡lculos: totalCreditos, totalDebitos, totalEstornos
âœ… BotÃ£o "Recarregar Fundo" (se ativo)
âœ… IntegraÃ§Ã£o com ModalRecarregarFundo

ALINHAMENTO COM DOCUMENTO:
âœ… Dashboard completo conforme SeÃ§Ã£o 4.6
âœ… TransaÃ§Ãµes ordenadas por data DESC
âœ… FormataÃ§Ã£o correta de valores (agora com fix de centavos)
âœ… Badge de status (ATIVO/ENCERRADO)

BOA IMPLEMENTAÃ‡ÃƒO!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3. PENDÃŠNCIAS E PRÃ“XIMOS PASSOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3.1. ALTA PRIORIDADE                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

P1: EXIBIR INFORMAÃ‡Ã•ES DE PAGAMENTO EM MODALRECARREGARFUNDO
LocalizaÃ§Ã£o: src/components/fundos/ModalRecarregarFundo.vue
AÃ§Ã£o: Adicionar seÃ§Ã£o para exibir urlPagamento (GPO) ou entidade+referÃªncia (REF)
ReferÃªncia: Documento SeÃ§Ã£o 4.5, Fluxo 5.2
Estimativa: 30 minutos
Status: â³ PENDENTE

P2: VALIDAR FUNDO ATIVO ANTES DE RECARREGAR
LocalizaÃ§Ã£o: src/components/fundos/ModalRecarregarFundo.vue
AÃ§Ã£o: Adicionar computed fundoAtivo e desabilitar recarga se fundo encerrado
ReferÃªncia: Documento SeÃ§Ã£o 7.5
Estimativa: 15 minutos
Status: â³ PENDENTE

P3: TESTAR CONVERSÃƒO DE CENTAVOS EM TODOS OS FLUXOS
AÃ§Ã£o: Teste end-to-end de criaÃ§Ã£o, recarga e dÃ©bito de fundo
Validar: Valores exibidos corretamente em todos os modals e views
Estimativa: 1 hora
Status: â³ PENDENTE

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3.2. MÃ‰DIA PRIORIDADE                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

P4: PADRONIZAR EVENTOS DOS MODALS
AÃ§Ã£o: Trocar 'fechar' â†’ 'close', 'fundo-criado' â†’ 'sucesso' em ModalCriarFundo
ReferÃªncia: ConsistÃªncia com ModalRecarregarFundo
Estimativa: 20 minutos
Status: ğŸ”œ PRÃ“XIMO

P5: ADICIONAR LOGS DE DEBUG ESTRATÃ‰GICOS
LocalizaÃ§Ã£o: Todos os componentes de fundo
AÃ§Ã£o: console.log('[ComponentName] AÃ§Ã£o', dados) em operaÃ§Ãµes crÃ­ticas
ReferÃªncia: Boas prÃ¡ticas de debugging
Estimativa: 30 minutos
Status: ğŸ”œ PRÃ“XIMO

P6: DOCUMENTAR COMPONENTES COM JSDOC
AÃ§Ã£o: Adicionar JSDoc em todos os componentes e composables
Estimativa: 1 hora
Status: ğŸ”œ PRÃ“XIMO

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3.3. BAIXA PRIORIDADE (MELHORIAS FUTURAS)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

P7: WEBSOCKET PARA ATUALIZAÃ‡ÃƒO AUTOMÃTICA DE SALDO
ReferÃªncia: Documento SeÃ§Ã£o 9.2
Endpoint: /topic/fundo/{fundoId}
Eventos: SALDO_ATUALIZADO, PAGAMENTO_CONFIRMADO
Status: ğŸ“‹ BACKLOG

P8: NOTIFICAÃ‡Ã•ES DE SALDO BAIXO
ReferÃªncia: Documento SeÃ§Ã£o 9.3
Alerta quando saldo < limite configurÃ¡vel
Status: ğŸ“‹ BACKLOG

P9: DASHBOARD DE FUNDOS
ReferÃªncia: Documento SeÃ§Ã£o 9.4
MÃ©tricas agregadas, grÃ¡ficos, top clientes
Status: ğŸ“‹ BACKLOG

P10: EXPORTAÃ‡ÃƒO DE EXTRATO (PDF/EXCEL)
ReferÃªncia: Documento SeÃ§Ã£o 9.5
Permitir download de extrato formatado
Status: ğŸ“‹ BACKLOG

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4. CHECKLIST DE VALIDAÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4.1. FLUXOS DE NEGÃ“CIO                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FLUXO 1: CRIAR PRIMEIRO FUNDO
[ ] Cliente sem fundo consegue ser identificado
[ ] Modal de criaÃ§Ã£o abre com clienteId preenchido
[ ] ValidaÃ§Ã£o de valorMinimo funciona
[ ] Fundo Ã© criado com saldoInicial correto
[ ] TransaÃ§Ã£o inicial tipo CREDITO Ã© registrada
[ ] ApÃ³s criar, saldo Ã© exibido corretamente

FLUXO 2: RECARREGAR FUNDO VIA GPO
[ ] Modal carrega valorMinimo
[ ] ValidaÃ§Ã£o de valor funciona
[ ] Recarga Ã© criada com status PENDENTE
[ ] urlPagamento Ã© exibida
[ ] BotÃ£o "Pagar no AppyPay" redireciona corretamente
[ ] ApÃ³s confirmaÃ§Ã£o, saldo Ã© atualizado

FLUXO 3: RECARREGAR FUNDO VIA REF
[ ] Modal carrega valorMinimo
[ ] ValidaÃ§Ã£o de valor funciona
[ ] Recarga Ã© criada com status PENDENTE
[ ] Entidade e referÃªncia sÃ£o exibidas
[ ] Dados estÃ£o formatados e copiÃ¡veis
[ ] ApÃ³s confirmaÃ§Ã£o, saldo Ã© atualizado

FLUXO 4: CRIAR PEDIDO PRÃ‰-PAGO
[ ] Fundo Ã© buscado ao abrir modal de pedido
[ ] Saldo Ã© exibido corretamente
[ ] ValidaÃ§Ã£o de saldo >= total funciona
[ ] Alerta de saldo insuficiente aparece
[ ] Pedido Ã© criado e dÃ©bito Ã© processado
[ ] Saldo Ã© atualizado imediatamente
[ ] TransaÃ§Ã£o tipo DEBITO Ã© registrada

FLUXO 5: CANCELAR PEDIDO PRÃ‰-PAGO (ESTORNO)
[ ] Pedido pode ser cancelado
[ ] Estorno Ã© processado
[ ] Saldo Ã© devolvido ao fundo
[ ] TransaÃ§Ã£o tipo ESTORNO Ã© registrada
[ ] statusFinanceiro do pedido = ESTORNADO

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4.2. VALIDAÃ‡Ã•ES E EDGE CASES                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VALIDAÃ‡Ã•ES:
[ ] saldoInicial >= valorMinimo (criaÃ§Ã£o)
[ ] valor >= valorMinimo (recarga)
[ ] saldo >= totalPedido (dÃ©bito)
[ ] fundo.ativo === true (recarga)
[ ] Cliente nÃ£o pode ter 2 fundos ativos

EDGE CASES:
[ ] Cliente sem fundo tenta criar pedido PRE_PAGO
[ ] Saldo insuficiente durante criaÃ§Ã£o de pedido
[ ] Fundo encerrado, usuÃ¡rio tenta recarregar
[ ] Pagamento AppyPay demora para confirmar
[ ] Dois atendentes criam pedidos simultÃ¢neos (concorrÃªncia)

ERROS:
[ ] 400: Mensagens especÃ­ficas sÃ£o exibidas
[ ] 404: Recursos nÃ£o encontrados sÃ£o tratados
[ ] 409: Conflitos de concorrÃªncia sÃ£o tratados
[ ] 500: Erros de servidor sÃ£o tratados com mensagens amigÃ¡veis

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4.3. EXIBIÃ‡ÃƒO DE VALORES                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FORMATAÃ‡ÃƒO:
[ ] Saldo em fundos: 10000 centavos â†’ "100,00 Kz"
[ ] Valor de recarga: 5000 centavos â†’ "50,00 Kz"
[ ] Total de pedido: 2800 centavos â†’ "28,00 Kz"
[ ] TransaÃ§Ãµes: Valores formatados corretamente
[ ] Preview de novo saldo: CÃ¡lculo correto

INPUTS:
[ ] Input de saldo inicial envia centavos para backend
[ ] Input de valor de recarga envia centavos para backend
[ ] parseCurrency converte "100,00 Kz" â†’ 10000 centavos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5. COMANDOS ÃšTEIS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Testar conversÃ£o de centavos no console do navegador
formatCurrency(10000)  // Deve retornar "100,00 Kz"
centavosParaDecimal(10000)  // Deve retornar 100
decimalParaCentavos(100)  // Deve retornar 10000

# Buscar usos de formatCurrency
grep -r "formatCurrency" src/

# Buscar usos de saldoAtual
grep -r "saldoAtual" src/

# Verificar imports de currency
grep -r "useCurrency\|formatCurrency" src/

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6. NOTAS IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ CRÃTICO:
- Backend armazena SEMPRE em centavos
- Frontend SEMPRE converte para exibiÃ§Ã£o
- formatCurrency() faz conversÃ£o automÃ¡tica
- parseCurrency() retorna centavos

ğŸ“Œ ATENÃ‡ÃƒO:
- Inputs de valor devem usar v-model.number
- ValidaÃ§Ãµes devem comparar valores em centavos
- CÃ¡lculos devem ser feitos em centavos
- ConversÃ£o para exibiÃ§Ã£o apenas no template

ğŸ“Œ BOAS PRÃTICAS:
- Sempre usar formatCurrency() para exibir valores
- Sempre usar parseCurrency() para ler inputs de usuÃ¡rio
- NÃ£o fazer cÃ¡lculos com valores formatados (strings)
- Manter lÃ³gica em centavos, sÃ³ converter na exibiÃ§Ã£o

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7. REFERÃŠNCIAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Documentos:
- ALINHAMENTO_FUNDO_CONSUMO_BACKEND_FRONTEND.txt (especificaÃ§Ã£o completa)
- CONTEXTO_FUNDO_CONSUMO_FRONTEND.txt (contexto atual)
- REFATORACAO_FUNDO_CONSUMO.md (anÃ¡lise de mudanÃ§as)

Arquivos modificados:
- src/utils/currency.js (âœ… CONCLUÃDO)

Arquivos a modificar:
- src/components/fundos/ModalRecarregarFundo.vue (â³ PENDENTE - P1, P2)

Arquivos validados como corretos:
- src/services/fundoConsumoService.js
- src/components/fundos/ModalCriarFundo.vue
- src/components/pedidos/ModalNovoPedido.vue
- src/modules/fundos/FundosView.vue
- src/views/FundoDetalheView.vue

================================================================================
FIM DO SUMÃRIO
Data: 22 de fevereiro de 2026
Status: REFATORAÃ‡ÃƒO EM ANDAMENTO - 50% COMPLETO
================================================================================
